name = "iptv"
compatibility_date = "2024-01-01"
pages_build_output_dir = "data/output"

[build]
command = "python main.py"
watch_dir = "src"

[build.environment]
PYTHON_VERSION = "3.11"

[[headers]]
for = "/*.m3u"
[headers.values]
Content-Type = "application/vnd.apple.mpegurl"
Cache-Control = "public, max-age=3600"
Access-Control-Allow-Origin = "*"
Access-Control-Allow-Methods = "GET, OPTIONS"
Access-Control-Allow-Headers = "*"

[[headers]]
for = "/*.txt"
[headers.values]
Content-Type = "text/plain; charset=utf-8"
Cache-Control = "public, max-age=3600"
Access-Control-Allow-Origin = "*"
Access-Control-Allow-Methods = "GET, OPTIONS"
Access-Control-Allow-Headers = "*"

[[headers]]
for = "/m3u/*"
[headers.values]
Content-Type = "application/vnd.apple.mpegurl"
Cache-Control = "public, max-age=3600"
Access-Control-Allow-Origin = "*"

[[headers]]
for = "/txt/*"
[headers.values]
Content-Type = "text/plain; charset=utf-8"
Cache-Control = "public, max-age=3600"
Access-Control-Allow-Origin = "*"

[[headers]]
for = "/epg/*"
[headers.values]
Content-Type = "application/xml; charset=utf-8"
Cache-Control = "public, max-age=86400"
Access-Control-Allow-Origin = "*"

[[headers]]
for = "/*.xml"
[headers.values]
Content-Type = "application/xml; charset=utf-8"
Cache-Control = "public, max-age=86400"
Access-Control-Allow-Origin = "*"

[[redirects]]
from = "/m3u"
to = "/m3u/iptv.m3u"
status = 301

[[redirects]]
from = "/txt"
to = "/txt/iptv.txt"
status = 301

[[redirects]]
from = "/epg"
to = "/epg/epg.xml"
status = 301

[[redirects]]
from = "/live"
to = "/m3u/live.m3u"
status = 301

[[redirects]]
from = "/*"
to = "/index.html"
status = 200
conditions = {Country = ["CN"]}

[vars]
ENVIRONMENT = "production"
